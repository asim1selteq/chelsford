(this["webpackJsonpfindanexpert-frontend"]=this["webpackJsonpfindanexpert-frontend"]||[]).push([[47],{1227:function(e,t,n){"use strict";function a(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,"a",(function(){return a}))},1326:function(e,t,n){},1849:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(13),s=n(1227),r=n(2),i=n(10),o=n(92),l=(n(1326),n(392)),d=n(96),u=n(418),m=n(1),j=Object(i.i)("attachement.svg"),b=Object(i.i)("send.svg"),f=function(e){var t=e.message,n=void 0===t?"hi":t,a=e.isSeen,c=void 0!==a&&a;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"message d-flex flex-column",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"sender",children:[n,"-9"]})}),c&&Object(m.jsx)("span",{className:"badge-seen ml-auto",children:"SEEN"})]})})},v=function(e){var t=e.message,n=void 0===t?"hi":t;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"message",children:Object(m.jsx)("div",{className:"receiver",children:n})})})},p=function(e){var t=e.profile;return Object(m.jsxs)("div",{class:"profile-avatar d-flex",children:[Object(m.jsxs)("div",{class:"img",children:[Object(m.jsx)("span",{className:"active_status_indicator"}),Object(m.jsx)("img",{src:"https://png.pngtree.com/png-vector/20200614/ourlarge/pngtree-businessman-user-avatar-character-vector-illustration-png-image_2242909.jpg",alt:""})]}),Object(m.jsxs)("div",{class:"username",children:[Object(m.jsx)("p",{className:"name",children:t.name}),Object(m.jsx)("p",{className:"active_label",children:"Online"})]})]})},h=function(){var e,t=document.getElementById("widget").getAttribute("src").split("?")[1];return(t=null===(e=t)||void 0===e?void 0:e.replace("cd=","")).split("||")[0]};t.default=function(e){Object(s.a)(e);var t=Object(r.useState)(""),n=Object(c.a)(t,2),i=n[0],O=n[1],g=Object(o.d)((function(e){return e.chatSupportPageReducer})),x=g.messages,N=g.conversationId,S=g.visitor,y=Object(o.c)(),E=Object(r.useRef)();Object(r.useEffect)((function(){return A(),setTimeout((function(){var e=document.getElementById("chat-box-icon");e&&(e.style.display="none")}),2e3),_(),l.a.on("v-join-ack",(function(e){y({type:d.a.SET_VISITOR,payload:e.detail})})),l.a.on("admin-message",(function(e){T(),y({type:d.a.NEW_ADMIN_MESSAGE,payload:e.detail})})),l.a.on("message-seen",(function(e){y({type:d.a.SEEN_MESSAGE,payload:e.detail.data})})),function(){var e=document.getElementById("chat-box-icon");e&&(e.style.display="block")}}),[]);var I=function(){i.trim()&&S&&Object(u.d)({fromId:S.userName,conversationId:N,text:i,adminToken:h(),host:"expert-dev.findanexpert.net"}).then((function(e){if(!N){y({type:d.a.SET_CONVERSATION_ID,payload:e.conversation.conversationId}),O("");var t=sessionStorage.getItem("v-itm");t&&(t=JSON.parse(t),sessionStorage.setItem("v-itm",JSON.stringify(Object(a.a)(Object(a.a)({},t),{},{conversationId:e.data.conversationId}))))}y({type:d.a.NEW_ADMIN_MESSAGE,payload:e.data}),T(),O("")})).catch((function(e){return console.log(e)}))},_=function(){N&&Object(u.b)(N).then((function(e){y({type:d.a.SET_MESSAGES,payload:e.data}),T()})).catch((function(e){return console.log(e)}))},T=function(){setTimeout((function(){var e;null===E||void 0===E||null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}),300)},A=function(){if(!S.userName&&!S.userName&&sessionStorage.getItem("v-itm")){var e=JSON.parse(sessionStorage.getItem("v-itm"));y({type:d.a.SET_VISITOR,payload:e})}};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"fae-chat-page-container",children:Object(m.jsxs)("div",{className:"chat-card",children:[Object(m.jsxs)("div",{className:"card-header flex-column",children:[Object(m.jsx)("p",{children:"Welcome To Live Chat"}),Object(m.jsx)("p",{children:Object(m.jsx)("span",{className:"bg-dark",children:" How can we help you ? "})}),Object(m.jsx)(p,{profile:{name:"Admin",userName:"adminSuper"}})]}),Object(m.jsxs)("div",{className:"card-body",children:[x.length>0&&x.map((function(e){return e.from&&e.from===S.userName?Object(m.jsx)(f,{message:e.text,isSeen:1===e.status}):Object(m.jsx)(v,{message:e.text})})),Object(m.jsx)("div",{ref:E})]}),Object(m.jsxs)("div",{className:"card-footer",children:[Object(m.jsx)("input",{placeholder:"Type message ...",type:"text",className:"form-control",value:i,onFocus:function(e){return function(){try{if(0===x.length)return;var e=x[x.length-1];if(e.from===S.userName)return;Object(u.c)(e.conversationId,e.from)}catch(t){console.log(t)}}()},onKeyPress:function(e){13===e.charCode&&I()},onChange:function(e){return O(e.target.value)}}),Object(m.jsxs)("div",{className:"buttons-group",children:[Object(m.jsx)("span",{className:"mr-auto icon-attachment",children:Object(m.jsx)("img",{src:j,alt:"attachment"})}),Object(m.jsx)("span",{className:"ml-auto icon-send",onClick:function(e){return I()},children:Object(m.jsx)("img",{src:b,alt:"send icon"})})]})]})]})})})}}}]);
//# sourceMappingURL=47.e1f2ca1d.chunk.js.map