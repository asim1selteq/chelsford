{"version":3,"sources":["Webviews/ThreedsStatusWebviewAndroid/action.js","Webviews/ThreedsStatusWebviewAndroid/ThreedsStatusPage.js"],"names":["REACT_APP_PAYMENT_VOUCHER","process","BEARER_TOKEN","REACT_APP_BEARER_TOKEN","APP_BASE_URL","REACT_APP_BASE_URL","myHeaders","Headers","append","concat","ThreedsStatus","_ref","cartId","transactionId","raw","JSON","stringify","requestOptions","method","headers","body","redirect","fetch","then","response","json","result","catch","error","capturePaymenFetch","_ref2","paymentAmount","stripePaymentMethodId","userCountryId","bookingId","voucherCode","userCurrencyCode","userId","data","countryId","currency","returnUrl","document","domain","indexOf","oneTimeCapture","oneTimeCaptureObj","jsondata","resp","e","console","log","oneTimeHoldPayment","oneTimeHoldPaymentObj","oneTimeThreedsStatus","oneTimeThreedsStatusObj","getClinicAddressAPI","getclinicPayload","ThreedsStatusPage","_useState","useState","code","_useState2","_slicedToArray","status","setStatus","URLSearchParams","window","location","search","get","isFoo","href","getElementsByTagName","classValue","className","useEffect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","callback","res","Android","threeDSStatusFunc","message","reason","redirectUrl","setupIntentResponseDetail","stop","loaderImage","getFileSrcFromPublicFolder","_jsx","children","_jsxs","FAEText","style","textAlign","FAELoading","type","height","_Fragment","FAEButton","onClick","setThreeDsStatus"],"mappings":"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","file":"static/js/67.454a459c.chunk.js","sourcesContent":["import { fetchAction } from \"../../redux/utils\";\r\nconst REACT_APP_PAYMENT_VOUCHER = process.env.REACT_APP_PAYMENT_VOUCHER;\r\nconst BEARER_TOKEN= process.env.REACT_APP_BEARER_TOKEN\r\nconst APP_BASE_URL = process.env.REACT_APP_BASE_URL;\r\n\r\n//business availibility\r\n\r\n\r\nvar myHeaders = new Headers();\r\nmyHeaders.append(\"Content-Type\", \"application/json\"); \r\nmyHeaders.append(\"mode\", \"no-cors\");\r\nmyHeaders.append(\"Authorization\", `Bearer ${BEARER_TOKEN}`); \r\nmyHeaders.append(\"Access-Control-Allow-Origin\",\"*\");\r\n\r\nexport const ThreedsStatus = ({ cartId , transactionId }) => {\r\n \r\nvar raw = JSON.stringify({\r\n   cartId : cartId,\r\n   transactionId : transactionId\r\n});\r\nvar requestOptions = {\r\n  method: 'POST',\r\n  headers: myHeaders,\r\n  body: raw,\r\n  redirect: 'follow'\r\n}; \r\nreturn fetch(`${REACT_APP_PAYMENT_VOUCHER}/Payment/ThreedsStatus`, requestOptions)\r\n  .then(response => response.json())\r\n  .then(result =>  result)\r\n  .catch(error => error); \r\n};\r\n \r\n\r\nexport const capturePaymenFetch = ({ \r\n  cartId,\r\n  paymentAmount,\r\n  stripePaymentMethodId,\r\n  userCountryId, \r\n  bookingId, \r\n  voucherCode, \r\n  userCurrencyCode,\r\n  transactionId,\r\n  userId}) => {\r\n \r\n  var data = JSON.stringify({ \r\n    bookingId :bookingId,\r\n    cartId : cartId ,\r\n    countryId :userCountryId,\r\n    currency :userCurrencyCode,\r\n    paymentAmount,\r\n    returnUrl: `${document.domain=='localhost'?'https://expert-dev.findanexpert.net/paymentverification':document.domain.indexOf(\"findanexpert\") !==-1 ?`https://${document.domain}/paymentverification`:\"https://www.expert.one/paymentverification\"}`,\r\n    stripePaymentMethodId :stripePaymentMethodId,\r\n    transactionId :transactionId,\r\n    userId :userId,\r\n    voucherCode :voucherCode  \r\n });\r\n  var requestOptions = {\r\n    method: 'POST',\r\n    headers: myHeaders,\r\n    body: data,\r\n    redirect: 'follow'\r\n  }; \r\n  return fetch( `${REACT_APP_PAYMENT_VOUCHER}/Payment/CapturePayment`, requestOptions)\r\n    .then(response => response.json())\r\n    .then(result =>  result)\r\n    .catch(error => error); \r\n  };\r\n\r\n\r\n  export function oneTimeCapture(oneTimeCaptureObj){\r\n    \r\n    var requestOptions = {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: JSON.stringify(oneTimeCaptureObj),\r\n      redirect: 'follow'\r\n    }; \r\n\r\n     return fetch(`${REACT_APP_PAYMENT_VOUCHER}/OneTimePayment/CapturePayment`,requestOptions)\r\n     .then(jsondata => {\r\n      return jsondata?.json();\r\n     }).then((resp) => {\r\n      return resp \r\n    })\r\n    .catch(e => {\r\n      console.log('e', e)\r\n    })\r\n\r\n  }\r\n\r\n  export function oneTimeHoldPayment(oneTimeHoldPaymentObj){\r\n    var requestOptions = {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: JSON.stringify(oneTimeHoldPaymentObj),\r\n      redirect: 'follow'\r\n    }; \r\n  return  fetch(`${REACT_APP_PAYMENT_VOUCHER}/OneTimePayment/HoldPayment`,requestOptions).then(response => response?.json())\r\n          .then((resp) =>  resp  )\r\n          .catch(e => console.log('e', e) )\r\n  }\r\n  \r\n  export function oneTimeThreedsStatus(oneTimeThreedsStatusObj){\r\n    var requestOptions = {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: JSON.stringify(oneTimeThreedsStatusObj),\r\n      redirect: 'follow'\r\n    }; \r\n    return fetch(`${REACT_APP_PAYMENT_VOUCHER}/OneTimePayment/ThreedsStatus`,requestOptions).then(response => response?.json())\r\n    .then((resp) =>  resp)\r\n    .catch(e => console.log('e', e))\r\n  }\r\n \r\nexport function getClinicAddressAPI(getclinicPayload){\r\n  var requestOptions = {\r\n    method: 'POST',\r\n    headers: myHeaders,\r\n    body: JSON.stringify(getclinicPayload),\r\n    redirect: 'follow'\r\n  }; \r\nreturn  fetch(`${APP_BASE_URL}/Addresses/GetClinicAddresses`,requestOptions).then(response => response?.json())\r\n        .then((resp) =>  resp  )\r\n        .catch(e => console.log('e', e) )\r\n}","//libs\r\nimport React, { createRef, useEffect, useState } from \"react\"; \r\nimport { FAEText, FAELoading } from \"@findanexpert-fae/components\"; \r\n\r\n//src\r\nimport { ThreedsStatus } from \"./action\"; \r\n\r\n//scss\r\nimport \"./ThreedsStatus.scss\"; \r\nimport { getFileSrcFromPublicFolder } from \"../../utils\";\r\nimport { FAEButton } from \"@findanexpert-fae/components/dist/stories/FAEButton/FAEButton\";\r\n\r\nconst ThreedsStatusPage = () => { \r\n  const [status, setStatus]=useState({code:400})\r\n  const cartId = new URLSearchParams(window.location.search).get(\"cartId\");\r\n  const transactionId = new URLSearchParams(window.location.search).get(\"transactionId\");\r\n  \r\n    var isFoo = window.location.href.indexOf('foo.com') > -1;\r\n    var body = document.getElementsByTagName(\"body\")[0];\r\n    var classValue = isFoo ? 'foo-class' : 'threeds-body-class';\r\n    body.className = body.className + ' '+ classValue; \r\n  \r\n  useEffect(async () => { \r\n   await  ThreedsStatus({\r\n            cartId,\r\n            transactionId,\r\n            callback: (res) =>  \r\n            window.Android.threeDSStatusFunc(  \r\n              res?.code, res?.message, res?.reason,  res?.redirectUrl, res?.returnUrl, res?.setupIntentResponseDetail, res?.error\r\n            ),\r\n        }).then((res=>{\r\n          setStatus(res)\r\n        }));\r\n  }, []);\r\n  function setThreeDsStatus(code, error, message) {\r\n    window.Android.threeDSStatusFunc(code, error, message);\r\n  }\r\n  const { code, message, reason,  redirectUrl, returnUrl, setupIntentResponseDetail, error}=status\r\nconsole.log(status, 'status')\r\nconst loaderImage = getFileSrcFromPublicFolder(\"loader.GIF\");\r\n  return ( \r\n      <div className=\"fae-threeds-webview\">\r\n       { code ==400 ?  \r\n       <FAEText style={{textAlign:\"center\"}}>\r\n         <FAELoading type=\"svg\" loaderImage={loaderImage} height=\"200px\" />\r\n          Loading ...\r\n       </FAEText>\r\n       :<>\r\n        <FAEText>\r\n          {message} \r\n        </FAEText>\r\n        <FAEButton onClick={()=>setThreeDsStatus(code, error, message )}>\r\n          Proceed\r\n        </FAEButton>\r\n       </>}\r\n    </div>\r\n      \r\n  );\r\n};\r\n\r\nexport default ThreedsStatusPage;\r\n"],"sourceRoot":""}