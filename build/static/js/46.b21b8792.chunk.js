(this["webpackJsonpfindanexpert-frontend"]=this["webpackJsonpfindanexpert-frontend"]||[]).push([[46],{1227:function(e,n,t){"use strict";function c(e){if(null==e)throw new TypeError("Cannot destructure "+e)}t.d(n,"a",(function(){return c}))},1326:function(e,n,t){},1802:function(e,n,t){"use strict";t.r(n),t.d(n,"SenderMessage",(function(){return j})),t.d(n,"ReceiverMessage",(function(){return f})),t.d(n,"createVisitor",(function(){return m})),t.d(n,"ProfileAvatar",(function(){return b}));var c=t(1227),s=t(13),a=t(2),r=t(10),i=t(92),o=(t(1326),t(392),t(96),t(418)),l=t(126),d=t(1),u=Object(r.i)("attachement.svg"),v=Object(r.i)("send.svg"),j=function(e){var n=e.message,t=void 0===n?"hi":n;e.status;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"message",children:Object(d.jsx)("div",{className:"sender",children:t})})})},f=function(e){var n=e.message,t=void 0===n?"hi":n,c=e.status,s=void 0===c?0:c;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"message d-flex flex-column",children:[Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"receiver",children:t})}),1===s?Object(d.jsx)("span",{className:"badge-seen badge-secondary pull-right",children:"SEEN"}):""]})})},m=function(e){Object(c.a)(e)},b=function(e){var n=e.profile;return Object(d.jsxs)("div",{class:"profile-avatar d-flex",children:[Object(d.jsxs)("div",{class:"img",children:[Object(d.jsx)("span",{className:"active_status_indicator"}),Object(d.jsx)("img",{src:"https://png.pngtree.com/png-vector/20200614/ourlarge/pngtree-businessman-user-avatar-character-vector-illustration-png-image_2242909.jpg",alt:""})]}),Object(d.jsxs)("div",{class:"username",children:[Object(d.jsx)("p",{className:"name",children:n.name}),Object(d.jsx)("p",{className:"active_label",children:"Online"})]})]})};n.default=function(e){var n=e.location.state,t=Object(a.useState)(""),c=Object(s.a)(t,2),m=c[0],b=c[1],h=Object(r.h)("customer_details").id,O=Object(i.d)((function(e){return e.customerChatReducer.messages.filter((function(e){var t,c;return!!n.conversation&&!(null===n||void 0===n||null===(t=n.conversation)||void 0===t||!t.conversationId)&&e.conversationId==(null===n||void 0===n||null===(c=n.conversation)||void 0===c?void 0:c.conversationId)}))})),p=Object(i.c)(),x=Object(a.useRef)();Object(a.useEffect)((function(){return N(),function(){}}),[]);var g=function(){m.trim()&&(b(""),Object(o.e)({customerId:h,conversationId:n.conversation.conversationId,text:m,providerId:n.providerId}).then((function(e){p({type:l.a.NEW_MESSAGE,payload:e.data}),I()})).catch((function(e){return console.log(e)})))},N=function(){var e;(null!==n&&void 0!==n&&n.conversation||null===n||void 0===n||!n.conversationId)&&Object(o.b)(null===n||void 0===n||null===(e=n.conversation)||void 0===e?void 0:e.conversationId).then((function(e){p({type:l.a.SET_MESSAGES_LIST,payload:e.data}),I()})).catch((function(e){return console.log(e)}))},I=function(){setTimeout((function(){var e;null===x||void 0===x||null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}),300)};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"fae-chat-page-container",children:Object(d.jsxs)("div",{className:"chat-card",children:[Object(d.jsx)("div",{className:"card-header flex-column",children:Object(d.jsxs)("p",{children:[null===n||void 0===n?void 0:n.serviceTypeName," ",Object(d.jsx)("i",{className:"fa fa-arrow-right"})," ",null===n||void 0===n?void 0:n.providerName]})}),Object(d.jsxs)("div",{className:"card-body",children:[O&&O.length>0&&O.map((function(e,n){return e.from&&e.from!=h?Object(d.jsx)(j,{message:e.text,status:e.status}):Object(d.jsx)(f,{message:e.text,status:e.status})})),Object(d.jsx)("div",{ref:x})]}),Object(d.jsxs)("div",{className:"card-footer",children:[Object(d.jsx)("input",{onFocus:function(){return function(){var e;if(null!==n&&void 0!==n&&n.conversation||null!==n&&void 0!==n&&null!==(e=n.conversation)&&void 0!==e&&e.conversationId){var t=O[O.length-1];t.from!=h&&1!==t.status&&Object(o.c)(null===t||void 0===t?void 0:t.conversationId,t.from).then((function(e){return p({type:l.a.CLEAR_COUNTS,payload:null===t||void 0===t?void 0:t.conversationId})}))}}()},placeholder:"Type message ...",type:"text",className:"form-control",value:m,onKeyPress:function(e){13===e.charCode&&g()},onChange:function(e){return b(e.target.value)}}),Object(d.jsxs)("div",{className:"buttons-group",children:[Object(d.jsx)("span",{className:"mr-auto icon-attachment",children:Object(d.jsx)("img",{src:u,alt:"attachment"})}),Object(d.jsx)("span",{className:"ml-auto icon-send",onClick:function(e){return g()},children:Object(d.jsx)("img",{src:v,alt:"send icon"})})]})]})]})})})}}}]);
//# sourceMappingURL=46.b21b8792.chunk.js.map